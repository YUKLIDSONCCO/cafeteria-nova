<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dashboard Barista</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { background: #f8f9fa; padding: 20px; margin: 10px 0; border-radius: 8px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Test Dashboard del Barista</h1>
    
    <div class="test-section">
        <h3>ğŸ“‹ Funcionalidades Implementadas:</h3>
        <ul>
            <li class="success">âœ… Auto-refresh cada 3 segundos</li>
            <li class="success">âœ… Click en cualquier parte del pedido para cambiar estado</li>
            <li class="success">âœ… Confirmado â†’ PreparaciÃ³n (click)</li>
            <li class="success">âœ… PreparaciÃ³n â†’ Listo (click)</li>
            <li class="success">âœ… DetecciÃ³n de cambios optimizada</li>
            <li class="success">âœ… Notificaciones visuales</li>
            <li class="success">âœ… Efectos CSS mejorados</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>ğŸ”§ Archivos Modificados/Creados:</h3>
        <ul>
            <li><strong>controllers/BaristaController.php</strong> - Agregados mÃ©todos AJAX</li>
            <li><strong>views/barista/dashboard.php</strong> - Tarjetas clickeables + CSS</li>
            <li><strong>public/js/barista-dashboard.js</strong> - JavaScript principal</li>
            <li><strong>public/barista_ajax.php</strong> - Endpoint AJAX dedicado</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>ğŸš€ CÃ³mo Probar:</h3>
        <ol>
            <li>Accede al dashboard del barista</li>
            <li>Verifica que aparezca "Ãšltima actualizaciÃ³n" con timestamp</li>
            <li>Si hay pedidos confirmados, haz click en cualquier parte del cuadro</li>
            <li>El pedido debe moverse automÃ¡ticamente a "En PreparaciÃ³n"</li>
            <li>Haz click en un pedido en preparaciÃ³n</li>
            <li>El pedido debe moverse a "Listos para Entregar"</li>
            <li>Observa las notificaciones visuales y efectos</li>
        </ol>
    </div>

    <div class="test-section">
        <h3>âš™ï¸ ConfiguraciÃ³n TÃ©cnica:</h3>
        <ul>
            <li><strong>Auto-refresh:</strong> 3 segundos</li>
            <li><strong>Base URL:</strong> http://172.80.15.22/cafeteria-nova/public/</li>
            <li><strong>AJAX Endpoint:</strong> barista_ajax.php</li>
            <li><strong>Acciones:</strong> obtenerPedidos, iniciarPreparacion, finalizarPreparacion</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>ğŸ¯ Flujo de Estados:</h3>
        <div style="display: flex; align-items: center; gap: 20px;">
            <div style="background: #f9f1fb; padding: 15px; border-radius: 8px; text-align: center;">
                <strong>ğŸ’œ Confirmado</strong><br>
                <small>Click â†’ PreparaciÃ³n</small>
            </div>
            <div style="font-size: 20px;">â†’</div>
            <div style="background: #fff7e6; padding: 15px; border-radius: 8px; text-align: center;">
                <strong>ğŸ’› PreparaciÃ³n</strong><br>
                <small>Click â†’ Listo</small>
            </div>
            <div style="font-size: 20px;">â†’</div>
            <div style="background: #f0fff4; padding: 15px; border-radius: 8px; text-align: center;">
                <strong>ğŸ’š Listo</strong><br>
                <small>Final</small>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h3>ğŸ” Debug Tools:</h3>
        <button onclick="checkConsole()">Abrir Console (F12)</button>
        <button onclick="testAjax()">Test AJAX</button>
        <button onclick="simulateClick()">Simular Click</button>
        
        <script>
            function checkConsole() {
                console.log('ğŸŒ¸ Dashboard del Barista - Debug Info:');
                console.log('Base URL:', 'http://172.80.15.22/cafeteria-nova/public/');
                console.log('Auto-refresh:', 'Cada 3 segundos');
                console.log('Estado actual:', window.baristaDashboard ? 'Activo' : 'No iniciado');
            }
            
            function testAjax() {
                fetch('http://172.80.15.22/cafeteria-nova/public/barista_ajax.php?action=obtenerPedidos', {
                    headers: { 'X-Requested-With': 'XMLHttpRequest' }
                })
                .then(response => response.json())
                .then(data => console.log('âœ… Test AJAX exitoso:', data))
                .catch(error => console.error('âŒ Test AJAX fallÃ³:', error));
            }
            
            function simulateClick() {
                const pedidoCards = document.querySelectorAll('.pedido-card');
                if (pedidoCards.length > 0) {
                    pedidoCards[0].click();
                    console.log('ğŸ–±ï¸ Click simulado en primer pedido');
                } else {
                    console.log('â„¹ï¸ No hay pedidos para hacer click');
                }
            }
        </script>
    </div>
</body>
</html>